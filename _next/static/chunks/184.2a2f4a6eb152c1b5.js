"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[184],{184:(e,t,a)=>{a.r(t),a.d(t,{ISSPassCalculator:()=>eg});var s=a(5155),r=a(2115),l=a(3998),n=a(3406),i=a(3101),o=a(4269);let c=(0,i.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,o.cn)(c({variant:a}),t),...r})}function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-title",className:(0,o.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...a})}function x(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,o.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}var m=a(7380),h=a(9559),g=a(6132),f=a(906),v=a(5447),p=a(8707);let j="https://celestrak.org/NORAD/elements/gp.php?CATNR=".concat("25544","&FORMAT=TLE"),b="iss_tle_cache";async function N(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e){let e=y();if(e)return{data:e,cached:!0}}try{let e=await fetch(j,{method:"GET",headers:{Accept:"text/plain"},cache:"no-store"});if(!e.ok)throw Error("HTTP ".concat(e.status,": ").concat(e.statusText));let t=(await e.text()).trim().split("\n");if(t.length<3)throw Error("Invalid TLE format: expected at least 3 lines");let a={line1:t[1].trim(),line2:t[2].trim(),fetchedAt:Date.now()};if(!function(e){let{line1:t,line2:a}=e;return 69===t.length&&69===a.length&&!!t.startsWith("1 ")&&!!a.startsWith("2 ")&&!!w(t)&&!!w(a)}(a))throw Error("Invalid TLE format: checksum or structure error");return function(e){try{localStorage.setItem(b,JSON.stringify(e))}catch(e){console.error("Error caching TLE:",e)}}(a),{data:a,cached:!1}}catch(e){console.error("Error fetching ISS TLE:",e);{let t=y(!0);if(t)return{data:t,cached:!0,error:"Failed to fetch fresh TLE: ".concat(e instanceof Error?e.message:"Unknown error",". Using cached data.")}}return{data:null,cached:!1,error:"Failed to fetch TLE: ".concat(e instanceof Error?e.message:"Unknown error")}}}function y(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let t=localStorage.getItem(b);if(!t)return null;let a=JSON.parse(t);if(!e&&Date.now()-a.fetchedAt>864e5)return null;return a}catch(e){return console.error("Error reading TLE cache:",e),null}}function w(e){let t=0;for(let a=0;a<68;a++){let s=e[a];s>="0"&&s<="9"?t+=parseInt(s):"-"===s&&(t+=1)}return t%10===parseInt(e[68])}var k=a(7041);function A(e,t){try{let a=k.jl(e.line1,e.line2),s=k.gv(a,t);if(!s||!s.position)return console.error("Satellite propagation error"),null;let r=s.position,l=s.velocity,n=k.Y0(t),i=k.$6(r,n),o=Math.sqrt(l.x*l.x+l.y*l.y+l.z*l.z);return{latitude:k.Zr(i.latitude),longitude:k.yy(i.longitude),altitude:i.height,velocity:o}}catch(e){return console.error("Error calculating satellite position:",e),null}}function E(e,t,a){try{let s=k.jl(e.line1,e.line2),r=k.gv(s,a);if(!r||!r.position)return null;let l=r.position,n={latitude:k.tR(t.latitude),longitude:k.tR(t.longitude),height:(t.altitude||0)/1e3},i=k.Y0(a),o=k.NU(l,i),c=k.RN(n,o),d=c.azimuth*(180/Math.PI),u=c.elevation*(180/Math.PI);return{azimuth:d<0?d+360:d,elevation:u,range:c.rangeSat,rangeRate:0}}catch(e){return console.error("Error calculating look angles:",e),null}}function S(e){return e.getTime()/864e5+2440587.5}function M(e){return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.round(e/22.5)%16]}function z(e,t){if(0===t.length)throw Error("Cannot build pass with empty trajectory");let a=-90,s=e,r=0;t.forEach((e,t)=>{e.lookAngles.elevation>a&&(a=e.lookAngles.elevation,s=e.date,r=t)});let l=t[t.length-1].date,n=(l.getTime()-e.getTime())/1e3;return{startTime:e,endTime:l,maxElevation:a,maxElevationTime:s,startAzimuth:t[0].lookAngles.azimuth,maxAzimuth:t[r].lookAngles.azimuth,endAzimuth:t[t.length-1].lookAngles.azimuth,duration:n,isVisible:!1,trajectory:t}}function T(e,t){return!t||void 0===t.minElevation||!(e.maxElevation<t.minElevation)}function C(e){let t=Math.floor(e/60),a=Math.floor(e%60);return"".concat(t,"m ").concat(a,"s")}function L(e){return e>=60?"excellent":e>=40?"good":e>=20?"fair":"poor"}async function F(e){try{let t=new URL("https://api.open-meteo.com/v1/forecast");t.searchParams.set("latitude",e.latitude.toFixed(4)),t.searchParams.set("longitude",e.longitude.toFixed(4)),t.searchParams.set("hourly","cloud_cover,precipitation,visibility"),t.searchParams.set("timezone","auto"),t.searchParams.set("forecast_days","7");let a=await fetch(t.toString(),{method:"GET",cache:"default"});if(!a.ok)return console.error("Weather API error:",a.status,a.statusText),null;return await a.json()}catch(e){return console.error("Failed to fetch weather forecast:",e),null}}let I=new Map;async function P(e){let t="".concat(e.latitude.toFixed(2),",").concat(e.longitude.toFixed(2)),a=I.get(t);if(a&&Date.now()-a.timestamp<18e5)return a.forecast;let s=await F(e);return s&&I.set(t,{forecast:s,timestamp:Date.now()}),s}var D=a(5142),W=a(6444),R=a(6561),B=a(1873),V=a(9068),Z=a(5299);function _(e){let{location:t,onLocationChange:a}=e,[i,o]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[g,f]=(0,r.useState)(!1),[v,p]=(0,r.useState)(null),j=t?function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(e<-90||e>90||t<-180||t>180)throw Error("Invalid coordinates: lat must be -90 to 90, lon must be -180 to 180");let s=t+180,r=e+90,l=Math.floor(s/20),n=Math.floor(r/10),i=Math.floor(s%20/2),o=Math.floor(r%10/1),c="";if(c+=String.fromCharCode(65+l),c+=String.fromCharCode(65+n),c+=i.toString(),c+=o.toString(),6===a){let e=Math.floor(r%10%1/(1/24));c+=String.fromCharCode(97+Math.floor(s%20%2/(2/24))),c+=String.fromCharCode(97+e)}return c}(t.latitude,t.longitude,6):null;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(n.tU,{defaultValue:"auto",className:"w-full",children:[(0,s.jsxs)(n.j7,{className:"grid w-full grid-cols-3",children:[(0,s.jsxs)(n.Xi,{value:"auto",children:[(0,s.jsx)(R.A,{className:"h-4 w-4 mr-1"}),"Auto"]}),(0,s.jsxs)(n.Xi,{value:"qth",children:[(0,s.jsx)(B.A,{className:"h-4 w-4 mr-1"}),"QTH"]}),(0,s.jsxs)(n.Xi,{value:"coords",children:[(0,s.jsx)(V.A,{className:"h-4 w-4 mr-1"}),"Coordenadas"]})]}),(0,s.jsxs)(n.av,{value:"auto",className:"space-y-3 mt-4",children:[(0,s.jsxs)(l.$,{onClick:()=>{if(f(!0),p(null),!navigator.geolocation){p("Geolocaliza\xe7\xe3o n\xe3o suportada neste navegador"),f(!1);return}navigator.geolocation.getCurrentPosition(e=>{a({latitude:e.coords.latitude,longitude:e.coords.longitude,altitude:e.coords.altitude||0,name:"".concat(e.coords.latitude.toFixed(4),", ").concat(e.coords.longitude.toFixed(4))}),f(!1)},e=>{let t="Erro ao obter localiza\xe7\xe3o: ".concat(e.message);(e.message.includes("429")||e.message.includes("rate limit")||e.message.includes("Network location provider"))&&(t='Limite de requisi\xe7\xf5es atingido. Por favor, use "QTH Locator" ou "Coordenadas" em vez disso, ou tente novamente mais tarde.'),p(t),f(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},disabled:g,variant:"outline",className:"w-full",children:[g?(0,s.jsx)(Z.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,s.jsx)(R.A,{className:"h-4 w-4 mr-2"}),g?"Detectando...":"Detectar Localiza\xe7\xe3o Autom\xe1tica"]}),(0,s.jsx)("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Usa GPS do dispositivo. Se n\xe3o funcionar (limite de requisi\xe7\xf5es), use as outras op\xe7\xf5es."})]}),(0,s.jsx)(n.av,{value:"qth",className:"mt-4",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p(null);let t=i.trim().toUpperCase();if(!function(e){let t=e.toUpperCase().trim();return/^[A-R]{2}[0-9]{2}([A-X]{2})?$/.test(t)}(t))return void p("Localizador QTH inv\xe1lido. Use formato AA00 ou AA00aa (ex: IM58kr)");let s=function(e){let t=e.toUpperCase().trim();if(!/^[A-R]{2}[0-9]{2}([A-X]{2})?$/.test(t))return null;let a=t.charCodeAt(0)-65,s=t.charCodeAt(1)-65,r=parseInt(t[2]),l=parseInt(t[3]),n=20*a-180;n+=2*r;let i=10*s-90;if(i+=+l,6===t.length){let e=t.charCodeAt(4)-65,a=t.charCodeAt(5)-65;n+=2*e/24,i+=a/24}return 4===t.length?(n+=1,i+=.5):(n+=2/24/2,i+=1/24/2),{latitude:i,longitude:n}}(t);if(!s)return void p("N\xe3o foi poss\xedvel converter o localizador QTH");a({latitude:s.latitude,longitude:s.longitude,altitude:0,name:t}),o("")},className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(W.J,{htmlFor:"qth-input",children:"Localizador QTH (Maidenhead)"}),(0,s.jsx)(D.p,{id:"qth-input",type:"text",placeholder:"IM58kr",value:i,onChange:e=>o(e.target.value.toUpperCase()),maxLength:6,className:"font-mono mt-1"}),(0,s.jsx)("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"Formato: AA00 (4 caracteres) ou AA00aa (6 caracteres). Ex: IM58, IM58kr"})]}),(0,s.jsxs)(l.$,{type:"submit",className:"w-full",children:[(0,s.jsx)(B.A,{className:"h-4 w-4 mr-2"}),"Usar Localizador QTH"]})]})}),(0,s.jsx)(n.av,{value:"coords",className:"mt-4",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p(null);let t=parseFloat(c),s=parseFloat(m);return isNaN(t)||t<-90||t>90?void p("Latitude inv\xe1lida. Deve estar entre -90 e 90 graus."):isNaN(s)||s<-180||s>180?void p("Longitude inv\xe1lida. Deve estar entre -180 e 180 graus."):void(a({latitude:t,longitude:s,altitude:0,name:"".concat(t.toFixed(4),", ").concat(s.toFixed(4))}),u(""),h(""))},className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(W.J,{htmlFor:"lat-input",children:"Latitude"}),(0,s.jsx)(D.p,{id:"lat-input",type:"number",step:"0.0001",placeholder:"38.7223",value:c,onChange:e=>u(e.target.value),className:"mt-1"}),(0,s.jsx)("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"Norte: positivo (+), Sul: negativo (-). Ex: Lisboa = 38.7223"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(W.J,{htmlFor:"lon-input",children:"Longitude"}),(0,s.jsx)(D.p,{id:"lon-input",type:"number",step:"0.0001",placeholder:"-9.1393",value:m,onChange:e=>h(e.target.value),className:"mt-1"}),(0,s.jsx)("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"Este: positivo (+), Oeste: negativo (-). Ex: Lisboa = -9.1393"})]}),(0,s.jsxs)(l.$,{type:"submit",className:"w-full",children:[(0,s.jsx)(V.A,{className:"h-4 w-4 mr-2"}),"Usar Coordenadas"]}),(0,s.jsxs)("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:["\uD83D\uDCA1 Encontre suas coordenadas em ",(0,s.jsx)("a",{href:"https://www.google.com/maps",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-slate-900 dark:hover:text-slate-200",children:"Google Maps"})," (clique direito → copiar coordenadas)"]})]})})]}),v&&(0,s.jsx)(d,{variant:"destructive",children:(0,s.jsx)(x,{children:v})}),t&&(0,s.jsx)("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-lg p-3 text-sm",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(B.A,{className:"h-4 w-4 mt-0.5 text-slate-600 dark:text-slate-400"}),(0,s.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,s.jsx)("div",{className:"font-medium",children:t.name||"Localiza\xe7\xe3o Atual"}),(0,s.jsxs)("div",{className:"text-slate-600 dark:text-slate-400 space-y-0.5",children:[(0,s.jsxs)("div",{children:["Lat: ",t.latitude.toFixed(4),"\xb0, Lon: ",t.longitude.toFixed(4),"\xb0"]}),j&&(0,s.jsxs)("div",{className:"font-mono",children:["QTH: ",j]})]})]})]})})]})}var O=a(7599);let H=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(O.bL,{className:(0,o.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:t,children:(0,s.jsx)(O.zi,{className:(0,o.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});H.displayName=O.bL.displayName;var U=a(3026);let G=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(U.bL,{ref:t,className:(0,o.cn)("relative flex w-full touch-none select-none items-center",a),...r,children:[(0,s.jsx)(U.CC,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,s.jsx)(U.Q6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(U.zi,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]})});G.displayName=U.bL.displayName;var X=a(3164),Q=a(6327);function q(e){let{filters:t,onFiltersChange:a}=e,[l,n]=(0,r.useState)(t.minElevation);return(0,r.useEffect)(()=>{n(t.minElevation)},[t.minElevation]),(0,s.jsxs)("div",{className:"space-y-6 p-4 bg-slate-50 dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(X.A,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"}),(0,s.jsx)(W.J,{htmlFor:"min-elevation",className:"text-sm font-medium",children:"Eleva\xe7\xe3o M\xednima"})]}),(0,s.jsxs)("span",{className:"text-sm font-mono text-slate-700 dark:text-slate-300",children:[l,"\xb0"]})]}),(0,s.jsx)(G,{id:"min-elevation",value:[l],onValueChange:e=>{n(e[0])},onValueCommit:e=>{a({...t,minElevation:e[0]})},min:0,max:90,step:5,className:"w-full"}),(0,s.jsxs)("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Filtra passagens com eleva\xe7\xe3o m\xe1xima abaixo de ",l,"\xb0"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between space-x-3 pt-3 border-t border-slate-200 dark:border-slate-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,s.jsx)(v.A,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(W.J,{htmlFor:"visible-only",className:"text-sm font-medium",children:"Apenas Passagens Vis\xedveis"}),(0,s.jsx)("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"ISS iluminado pelo sol + c\xe9u escuro"})]})]}),(0,s.jsx)(H,{id:"visible-only",checked:t.visibleOnly,onCheckedChange:e=>{a({...t,visibleOnly:e})}})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between space-x-3 pt-3 border-t border-slate-200 dark:border-slate-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,s.jsx)(Q.A,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(W.J,{htmlFor:"good-weather-only",className:"text-sm font-medium",children:"Apenas Bom Tempo"}),(0,s.jsx)("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"C\xe9u limpo (< 30% nuvens) sem precipita\xe7\xe3o"})]})]}),(0,s.jsx)(H,{id:"good-weather-only",checked:t.goodWeatherOnly,onCheckedChange:e=>{a({...t,goodWeatherOnly:e})}})]})]})}var J=a(8352),$=a(1163),Y=a(3766),K=a(7270),ee=a(1647),et=a(6948),ea=a(6983),es=a(532),er=a(2528),el=a(2320),en=a(1524),ei=a(5221);function eo(e){let{passes:t,currentTime:a}=e,l=(0,r.useMemo)(()=>t.find(e=>e.startTime>a),[t,a]);return 0===t.length?(0,s.jsx)(et.Zp,{children:(0,s.jsxs)(et.aR,{children:[(0,s.jsx)(et.ZB,{children:"Nenhuma Passagem Encontrada"}),(0,s.jsx)(et.BT,{children:"N\xe3o foram encontradas passagens da ISS para os pr\xf3ximos 7 dias com os filtros atuais."})]})}):(0,s.jsxs)("div",{className:"space-y-4",children:[l&&(0,s.jsxs)(et.Zp,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border-blue-200 dark:border-blue-800",children:[(0,s.jsxs)(et.aR,{children:[(0,s.jsxs)(et.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(ea.A,{className:"h-5 w-5"}),"Pr\xf3xima Passagem"]}),(0,s.jsx)(et.BT,{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:(0,J.m)(l.startTime,{locale:Y.pt,addSuffix:!0})})]}),(0,s.jsxs)(et.Wu,{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-slate-600 dark:text-slate-400",children:"In\xedcio"}),(0,s.jsx)("div",{className:"font-medium",children:(0,$.GP)(l.startTime,"HH:mm:ss",{locale:Y.pt})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-slate-600 dark:text-slate-400",children:"Dura\xe7\xe3o"}),(0,s.jsx)("div",{className:"font-medium",children:C(l.duration)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-slate-600 dark:text-slate-400",children:"Eleva\xe7\xe3o M\xe1x."}),(0,s.jsxs)("div",{className:"font-medium",children:[l.maxElevation.toFixed(1),"\xb0"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-slate-600 dark:text-slate-400",children:"Dire\xe7\xe3o"}),(0,s.jsx)("div",{className:"font-medium",children:M(l.maxAzimuth)})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2",children:[l.isVisible?(0,s.jsxs)(ee.E,{variant:"default",className:"bg-green-600 hover:bg-green-700",children:[(0,s.jsx)(v.A,{className:"h-3 w-3 mr-1"}),"Vis\xedvel"]}):(0,s.jsxs)(ee.E,{variant:"secondary",children:[(0,s.jsx)(es.A,{className:"h-3 w-3 mr-1"}),"N\xe3o Vis\xedvel"]}),(0,s.jsx)(ee.E,{variant:"outline",children:ec(L(l.maxElevation))}),l.weather&&(l.weather.isGoodWeather?(0,s.jsxs)(ee.E,{variant:"default",className:"bg-blue-600 hover:bg-blue-700",children:[(0,s.jsx)(er.A,{className:"h-3 w-3 mr-1"}),"Bom Tempo"]}):(0,s.jsxs)(ee.E,{variant:"outline",className:"text-orange-600 dark:text-orange-400",children:[(0,s.jsx)(el.A,{className:"h-3 w-3 mr-1"}),"Nuvens: ",l.weather.cloudCover.toFixed(0),"%"]}))]})]})]}),(0,s.jsxs)(et.Zp,{children:[(0,s.jsxs)(et.aR,{children:[(0,s.jsxs)(et.ZB,{children:["Todas as Passagens (",t.length,")"]}),(0,s.jsx)(et.BT,{children:"Pr\xf3ximos 7 dias"})]}),(0,s.jsx)(et.Wu,{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(K.XI,{children:[(0,s.jsx)(K.A0,{children:(0,s.jsxs)(K.Hj,{children:[(0,s.jsx)(K.nd,{children:"Data/Hora"}),(0,s.jsx)(K.nd,{children:"Dura\xe7\xe3o"}),(0,s.jsx)(K.nd,{className:"text-center",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,s.jsx)(en.A,{className:"h-4 w-4"}),"Elev. M\xe1x."]})}),(0,s.jsx)(K.nd,{className:"text-center",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,s.jsx)(ei.A,{className:"h-4 w-4"}),"Dire\xe7\xe3o"]})}),(0,s.jsx)(K.nd,{children:"Qualidade"}),(0,s.jsx)(K.nd,{children:"Visibilidade"}),(0,s.jsx)(K.nd,{className:"text-center",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,s.jsx)(el.A,{className:"h-4 w-4"}),"Tempo"]})})]})}),(0,s.jsx)(K.BF,{children:t.map((e,t)=>{let a=e===l;return(0,s.jsxs)(K.Hj,{className:a?"bg-blue-50 dark:bg-blue-950":"",children:[(0,s.jsx)(K.nA,{className:"font-medium",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{children:(0,$.GP)(e.startTime,"dd/MM/yyyy",{locale:Y.pt})}),(0,s.jsx)("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:(0,$.GP)(e.startTime,"HH:mm:ss",{locale:Y.pt})})]})}),(0,s.jsx)(K.nA,{children:(0,s.jsx)("span",{className:"font-mono text-sm",children:C(e.duration)})}),(0,s.jsxs)(K.nA,{className:"text-center font-medium",children:[e.maxElevation.toFixed(1),"\xb0"]}),(0,s.jsx)(K.nA,{className:"text-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("span",{className:"font-medium",children:M(e.maxAzimuth)}),(0,s.jsxs)("span",{className:"text-xs text-slate-600 dark:text-slate-400 font-mono",children:[e.maxAzimuth.toFixed(0),"\xb0"]})]})}),(0,s.jsx)(K.nA,{children:(0,s.jsx)(ee.E,{variant:{excellent:"default",good:"default",fair:"secondary",poor:"outline"}[L(e.maxElevation)],children:ec(L(e.maxElevation))})}),(0,s.jsx)(K.nA,{children:e.isVisible?(0,s.jsxs)(ee.E,{variant:"default",className:"bg-green-600 hover:bg-green-700",children:[(0,s.jsx)(v.A,{className:"h-3 w-3 mr-1"}),"Sim"]}):(0,s.jsxs)(ee.E,{variant:"secondary",children:[(0,s.jsx)(es.A,{className:"h-3 w-3 mr-1"}),"N\xe3o"]})}),(0,s.jsx)(K.nA,{className:"text-center",children:e.weather?e.weather.isGoodWeather?(0,s.jsxs)(ee.E,{variant:"default",className:"bg-blue-600 hover:bg-blue-700",children:[(0,s.jsx)(er.A,{className:"h-3 w-3 mr-1"}),"Bom"]}):(0,s.jsxs)(ee.E,{variant:"outline",className:"text-orange-600 dark:text-orange-400",children:[(0,s.jsx)(el.A,{className:"h-3 w-3 mr-1"}),e.weather.cloudCover.toFixed(0),"%"]}):(0,s.jsx)(ee.E,{variant:"secondary",className:"text-xs",children:"N/D"})})]},t)})})]})})})]})]})}function ec(e){return({excellent:"Excelente",good:"Boa",fair:"Razo\xe1vel",poor:"Fraca"})[e]}function ed(e){let{passes:t,currentPosition:a,width:l=600,height:n=600}=e,i=l/2,o=n/2,c=Math.min(l,n)/2-40,d=r.useCallback((e,t)=>{let a=c*(1-e/90),s=Math.PI/180*(t-90);return{x:i+a*Math.cos(s),y:o+a*Math.sin(s)}},[i,o,c]),u=(0,r.useMemo)(()=>t.slice(0,10).map((e,t)=>{let a=e.trajectory.map(e=>{let t=d(e.lookAngles.elevation,e.lookAngles.azimuth);return"".concat(t.x,",").concat(t.y)}),s=d(e.trajectory[0].lookAngles.elevation,e.trajectory[0].lookAngles.azimuth),r=d(e.maxElevation,e.maxAzimuth);return{path:"M ".concat(a.join(" L ")),color:e.isVisible?"hsl(".concat(140-15*t,", 70%, 50%)"):"hsl(".concat(220-15*t,", 50%, 60%)"),startPoint:s,maxElevationPoint:r,pass:e,index:t}}),[t,d]);return(0,s.jsxs)(et.Zp,{children:[(0,s.jsxs)(et.aR,{children:[(0,s.jsx)(et.ZB,{children:"Carta Celeste"}),(0,s.jsx)(et.BT,{children:"Trajet\xf3ria da ISS no c\xe9u (vis\xe3o do observador)"})]}),(0,s.jsx)(et.Wu,{children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsxs)("svg",{width:l,height:n,viewBox:"0 0 ".concat(l," ").concat(n),className:"max-w-full h-auto",children:[(0,s.jsx)("rect",{width:l,height:n,fill:"transparent"}),[0,30,60,90].map(e=>{let t=c*(1-e/90);return(0,s.jsxs)("g",{children:[(0,s.jsx)("circle",{cx:i,cy:o,r:t,fill:"none",stroke:"currentColor",strokeWidth:0===e?2:1,strokeDasharray:0===e?"none":"4 2",className:"text-slate-300 dark:text-slate-700"}),e>0&&(0,s.jsxs)("text",{x:i+5,y:o-t+5,fontSize:"10",className:"fill-slate-500 dark:fill-slate-500",children:[e,"\xb0"]})]},e)}),[{label:"N",angle:0},{label:"NE",angle:45},{label:"E",angle:90},{label:"SE",angle:135},{label:"S",angle:180},{label:"SW",angle:225},{label:"W",angle:270},{label:"NW",angle:315}].map(e=>{let t=d(0,e.angle),a=d(-10,e.angle);return(0,s.jsxs)("g",{children:[(0,s.jsx)("line",{x1:i,y1:o,x2:t.x,y2:t.y,stroke:"currentColor",strokeWidth:e.angle%90==0?1.5:.5,strokeDasharray:"2 2",className:"text-slate-300 dark:text-slate-700"}),(0,s.jsx)("text",{x:a.x,y:a.y,fontSize:e.angle%90==0?"14":"12",fontWeight:e.angle%90==0?"bold":"normal",textAnchor:"middle",dominantBaseline:"middle",className:"fill-slate-700 dark:fill-slate-300",children:e.label})]},e.label)}),(0,s.jsx)("circle",{cx:i,cy:o,r:3,fill:"currentColor",className:"text-slate-400 dark:text-slate-600"}),(0,s.jsx)("text",{x:i,y:o-10,fontSize:"10",textAnchor:"middle",className:"fill-slate-500 dark:fill-slate-500",children:"Z\xe9nite"}),u.map(e=>{let{path:t,color:a,startPoint:r,maxElevationPoint:l,index:n}=e;return(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:t,fill:"none",stroke:a,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",opacity:.7}),(0,s.jsx)("circle",{cx:r.x,cy:r.y,r:4,fill:a,stroke:"white",strokeWidth:1.5}),(0,s.jsx)("circle",{cx:l.x,cy:l.y,r:5,fill:a,stroke:"white",strokeWidth:2,opacity:.9})]},n)}),a&&a.elevation>0&&(0,s.jsx)("g",{children:(()=>{let e=d(a.elevation,a.azimuth);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("circle",{cx:e.x,cy:e.y,r:8,fill:"red",stroke:"white",strokeWidth:2,opacity:.9,children:(0,s.jsx)("animate",{attributeName:"r",values:"8;12;8",dur:"1.5s",repeatCount:"indefinite"})}),(0,s.jsx)("text",{x:e.x,y:e.y-15,fontSize:"12",fontWeight:"bold",textAnchor:"middle",className:"fill-red-600 dark:fill-red-400",children:"AGORA"})]})})()})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center",children:[(0,s.jsxs)(ee.E,{variant:"outline",className:"text-xs",children:[(0,s.jsx)("span",{className:"inline-block w-3 h-3 rounded-full bg-green-500 mr-1"}),"Vis\xedvel"]}),(0,s.jsxs)(ee.E,{variant:"outline",className:"text-xs",children:[(0,s.jsx)("span",{className:"inline-block w-3 h-3 rounded-full bg-blue-500 mr-1"}),"N\xe3o Vis\xedvel"]}),(0,s.jsxs)(ee.E,{variant:"outline",className:"text-xs",children:[(0,s.jsx)("span",{className:"inline-block w-3 h-3 rounded-full border-2 border-current mr-1"}),"In\xedcio da Passagem"]}),(0,s.jsxs)(ee.E,{variant:"outline",className:"text-xs",children:[(0,s.jsx)("span",{className:"inline-block w-3 h-3 rounded-full bg-current mr-1"}),"Eleva\xe7\xe3o M\xe1xima"]})]}),(0,s.jsx)("p",{className:"text-xs text-slate-600 dark:text-slate-400 text-center max-w-md",children:"Mostra at\xe9 10 pr\xf3ximas passagens. O centro representa o z\xe9nite (diretamente acima), e o c\xedrculo externo representa o horizonte."})]})})]})}var eu=a(5027),ex=a.n(eu);function em(e){let{currentPosition:t,observer:a,orbitPath:l=[]}=e,n=(0,r.useRef)(null),i=(0,r.useRef)(null),o=(0,r.useRef)(null),c=(0,r.useRef)(null),d=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!n.current||i.current)return;let e=ex().map(n.current,{center:[(null==t?void 0:t.latitude)||0,(null==t?void 0:t.longitude)||0],zoom:3,scrollWheelZoom:!0});return ex().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:19}).addTo(e),i.current=e,()=>{e.remove(),i.current=null}},[null==t?void 0:t.latitude,null==t?void 0:t.longitude]),(0,r.useEffect)(()=>{if(!i.current||!t)return;let e=ex().divIcon({html:'<div style="\n        width: 16px;\n        height: 16px;\n        background: #ef4444;\n        border: 3px solid white;\n        border-radius: 50%;\n        box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n      "></div>',className:"",iconSize:[16,16],iconAnchor:[8,8]});o.current?o.current.setLatLng([t.latitude,t.longitude]):o.current=ex().marker([t.latitude,t.longitude],{icon:e}).addTo(i.current).bindPopup('\n          <div style="font-family: sans-serif;">\n            <strong>ISS</strong><br/>\n            Lat: '.concat(t.latitude.toFixed(2),"\xb0<br/>\n            Lon: ").concat(t.longitude.toFixed(2),"\xb0<br/>\n            Alt: ").concat(t.altitude.toFixed(0)," km<br/>\n            Vel: ").concat((3600*t.velocity).toFixed(0)," km/h\n          </div>\n        "))},[t]),(0,r.useEffect)(()=>{if(!i.current)return;let e=ex().divIcon({html:'<div style="\n        width: 12px;\n        height: 12px;\n        background: #3b82f6;\n        border: 2px solid white;\n        border-radius: 50%;\n        box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n      "></div>',className:"",iconSize:[12,12],iconAnchor:[6,6]});c.current?c.current.setLatLng([a.latitude,a.longitude]):c.current=ex().marker([a.latitude,a.longitude],{icon:e}).addTo(i.current).bindPopup('\n          <div style="font-family: sans-serif;">\n            <strong>Sua Localiza\xe7\xe3o</strong><br/>\n            '.concat(a.name||"","<br/>\n            Lat: ").concat(a.latitude.toFixed(4),"\xb0<br/>\n            Lon: ").concat(a.longitude.toFixed(4),"\xb0\n          </div>\n        "))},[a]),(0,r.useEffect)(()=>{if(!i.current||0===l.length)return;let e=l.map(e=>[e.latitude,e.longitude]);d.current?d.current.setLatLngs(e):d.current=ex().polyline(e,{color:"#ef4444",weight:2,opacity:.6,dashArray:"5, 5"}).addTo(i.current)},[l]),(0,r.useEffect)(()=>{if(!i.current||!t)return;let e=i.current.getCenter();i.current.distance(e,ex().latLng(t.latitude,t.longitude))>5e5&&i.current.panTo([t.latitude,t.longitude],{animate:!0,duration:1})},[t]),(0,s.jsxs)(et.Zp,{children:[(0,s.jsxs)(et.aR,{children:[(0,s.jsx)(et.ZB,{children:"Rastro no Solo"}),(0,s.jsx)(et.BT,{children:"Posi\xe7\xe3o atual da ISS e trajet\xf3ria orbital"})]}),(0,s.jsxs)(et.Wu,{children:[(0,s.jsx)("div",{ref:n,className:"w-full h-[500px] rounded-lg overflow-hidden border border-slate-200 dark:border-slate-800"}),(0,s.jsxs)("div",{className:"mt-4 flex gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded-full border-2 border-white"}),(0,s.jsx)("span",{children:"ISS"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full border-2 border-white"}),(0,s.jsx)("span",{children:"Sua Localiza\xe7\xe3o"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-0.5 bg-red-500 opacity-60",style:{borderTop:"2px dashed"}}),(0,s.jsx)("span",{children:"\xd3rbita"})]})]})]})]})}function eh(e){let{tle:t,currentPosition:a,currentLookAngles:r,nextPassTime:l}=e,n=!!r&&r.elevation>0;return a&&r?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(et.Zp,{className:n?"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 border-green-200 dark:border-green-800":"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-950",children:[(0,s.jsx)(et.aR,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(et.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(m.A,{className:"h-5 w-5"}),"Estado Atual"]}),n?(0,s.jsxs)(ee.E,{className:"bg-green-600 hover:bg-green-700 animate-pulse",children:[(0,s.jsx)(v.A,{className:"h-3 w-3 mr-1"}),"VIS\xcdVEL AGORA"]}):(0,s.jsx)(ee.E,{variant:"secondary",children:"Abaixo do Horizonte"})]})}),(0,s.jsx)(et.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"text-slate-600 dark:text-slate-400 flex items-center gap-1",children:[(0,s.jsx)(en.A,{className:"h-3 w-3"}),"Eleva\xe7\xe3o"]}),(0,s.jsxs)("div",{className:"text-2xl font-bold font-mono ".concat(n?"text-green-700 dark:text-green-400":""),children:[r.elevation.toFixed(1),"\xb0"]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"text-slate-600 dark:text-slate-400 flex items-center gap-1",children:[(0,s.jsx)(ei.A,{className:"h-3 w-3"}),"Azimute"]}),(0,s.jsxs)("div",{className:"text-2xl font-bold font-mono",children:[r.azimuth.toFixed(1),"\xb0"]}),(0,s.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:M(r.azimuth)})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"text-slate-600 dark:text-slate-400 flex items-center gap-1",children:[(0,s.jsx)(R.A,{className:"h-3 w-3"}),"Dist\xe2ncia"]}),(0,s.jsx)("div",{className:"text-2xl font-bold font-mono",children:r.range.toFixed(0)}),(0,s.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"km"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"text-slate-600 dark:text-slate-400 flex items-center gap-1",children:[(0,s.jsx)(m.A,{className:"h-3 w-3"}),"Altitude"]}),(0,s.jsx)("div",{className:"text-2xl font-bold font-mono",children:a.altitude.toFixed(0)}),(0,s.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"km"})]})]})})]}),(0,s.jsxs)(et.Zp,{children:[(0,s.jsxs)(et.aR,{children:[(0,s.jsx)(et.ZB,{children:"Posi\xe7\xe3o da ISS"}),(0,s.jsx)(et.BT,{children:"Localiza\xe7\xe3o geogr\xe1fica atual"})]}),(0,s.jsx)(et.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-slate-600 dark:text-slate-400",children:"Latitude"}),(0,s.jsxs)("div",{className:"text-xl font-mono",children:[a.latitude.toFixed(4),"\xb0"]}),(0,s.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:a.latitude>0?"Norte":"Sul"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-slate-600 dark:text-slate-400",children:"Longitude"}),(0,s.jsxs)("div",{className:"text-xl font-mono",children:[a.longitude.toFixed(4),"\xb0"]}),(0,s.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:a.longitude>0?"Este":"Oeste"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-slate-600 dark:text-slate-400",children:"Velocidade"}),(0,s.jsx)("div",{className:"text-xl font-mono",children:(3600*a.velocity).toFixed(0)}),(0,s.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"km/h"})]})]})})]}),!n&&l&&(0,s.jsxs)(et.Zp,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border-blue-200 dark:border-blue-800",children:[(0,s.jsxs)(et.aR,{children:[(0,s.jsxs)(et.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(ea.A,{className:"h-5 w-5"}),"Pr\xf3xima Passagem"]}),(0,s.jsx)(et.BT,{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:(0,J.m)(l,{locale:Y.pt,addSuffix:!0})})]}),(0,s.jsx)(et.Wu,{children:(0,s.jsxs)("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[(0,s.jsx)("strong",{children:"Dica:"})," Configure um alarme para n\xe3o perder a pr\xf3xima passagem vis\xedvel!"]})})]}),t&&(0,s.jsxs)("div",{className:"text-xs text-slate-600 dark:text-slate-400 text-center",children:["Dados orbitais de ",new Date(t.fetchedAt).toLocaleString("pt-PT"),Date.now()-t.fetchedAt>1728e5&&(0,s.jsx)("span",{className:"text-orange-600 dark:text-orange-400 ml-2",children:"(atualize os dados para maior precis\xe3o)"})]})]}):(0,s.jsx)(et.Zp,{children:(0,s.jsxs)(et.aR,{children:[(0,s.jsx)(et.ZB,{children:"Rastreamento em Tempo Real"}),(0,s.jsx)(et.BT,{children:"Carregando dados da ISS..."})]})})}function eg(){let[e,t]=(0,r.useState)(null),[a,i]=(0,r.useState)(null),[o,c]=(0,r.useState)([]),[j,b]=(0,r.useState)({minElevation:10,visibleOnly:!1,goodWeatherOnly:!1}),[w,M]=(0,r.useState)(!1),[C,L]=(0,r.useState)(null),[F,I]=(0,r.useState)(null),[D,W]=(0,r.useState)(new Date);(0,r.useEffect)(()=>{let e=setInterval(()=>{W(new Date)},1e3);return()=>clearInterval(e)},[]);let R=(0,r.useMemo)(()=>a?A(a,D):null,[a,D]),B=(0,r.useMemo)(()=>a&&e?E(a,e,D):null,[a,e,D]),V=(0,r.useMemo)(()=>{if(!a)return[];let e=[];for(let t=0;t<=90;t++){let s=A(a,new Date(D.getTime()+60*t*1e3));s&&e.push(s)}return e},[a,D]),Z=(0,r.useMemo)(()=>{let e=o;return j.minElevation>0&&(e=e.filter(e=>e.maxElevation>=j.minElevation)),j.visibleOnly&&(e=e.filter(e=>e.isVisible)),j.goodWeatherOnly&&(e=e.filter(e=>{var t;return!!(t=e.weather)&&t.isGoodWeather})),e},[o,j]),O=(0,r.useMemo)(()=>{if(!a||!e||0===Z.length)return null;let t=Z.find(e=>e.startTime>D);return t?t.startTime:null},[a,e,Z,D]);(0,r.useEffect)(()=>{U();let e=setInterval(()=>{I(function(){let e=y(!0);return e?Date.now()-e.fetchedAt:null}())},6e4);return()=>clearInterval(e)},[]);let H=(0,r.useCallback)(async()=>{if(e&&a){M(!0);try{let t=function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:7,r=arguments.length>4?arguments[4]:void 0,l=[],n=new Date(a.getTime()+24*s*36e5),i=new Date(a),o=!1,c=null,d=[];for(;i<=n;){let a=E(e,t,i);if(a){let t=a.elevation>0;if(t&&!o&&(c=new Date(i),d=[]),t&&c){let t=A(e,i);t&&d.push({date:new Date(i),position:t,lookAngles:a})}if(!t&&o&&c&&d.length>0){let e=z(c,d);T(e,r)&&l.push(e),c=null,d=[]}o=t}i=new Date(i.getTime()+6e4)}if(c&&d.length>0){let e=z(c,d);T(e,r)&&l.push(e)}return(null==r?void 0:r.maxResults)&&l.length>r.maxResults?l.slice(0,r.maxResults):l}(a,e,new Date,7);t=t.map(t=>({...t,isVisible:function(e,t,a){let s=[{date:a.startTime,elevation:a.trajectory[0].lookAngles.elevation},{date:a.maxElevationTime,elevation:a.maxElevation},{date:a.endTime,elevation:a.trajectory[a.trajectory.length-1].lookAngles.elevation}];if(a.trajectory.length>6){let e=Math.floor(a.trajectory.length/2);s.push({date:a.trajectory[e].date,elevation:a.trajectory[e].lookAngles.elevation})}return s.some(a=>(function(e,t,a,s){let r=function(e,t){let a=(S(t)-2451545)/36525,s=(357.52911+a*(35999.05029-1537e-7*a))%360*Math.PI/180,r=(1.914602-a*(.004817+14e-6*a))*Math.sin(s)+(.019993-101e-6*a)*Math.sin(2*s)+289e-6*Math.sin(3*s),l=((280.46646+a*(36000.76983+3032e-7*a))%360+r)*Math.PI/180,n=(23.439291-.0130042*a)*Math.PI/180,i=Math.atan2(Math.cos(n)*Math.sin(l),Math.cos(l)),o=Math.asin(Math.sin(n)*Math.sin(l)),c=k.Y0(t)+e.longitude*Math.PI/180-i,d=e.latitude*Math.PI/180,u=Math.sin(d)*Math.sin(o)+Math.cos(d)*Math.cos(o)*Math.cos(c),x=Math.asin(u),m=Math.acos(Math.max(-1,Math.min(1,(Math.sin(o)-Math.sin(d)*u)/(Math.cos(d)*Math.cos(x)))));return Math.sin(c)>0&&(m=2*Math.PI-m),{azimuth:180*m/Math.PI,elevation:180*x/Math.PI}}(t,a).elevation<-6,l=function(e,t){try{let a=k.jl(e.line1,e.line2),s=k.gv(a,t);if(!s||!s.position)return!1;let r=s.position,l=(S(t)-2451545)/36525,n=(1.914602-l*(.004817+14e-6*l))*Math.sin((357.52911+l*(35999.05029-1537e-7*l))%360*Math.PI/180),i=((280.46646+l*(36000.76983+3032e-7*l))%360+n)*Math.PI/180,o={x:149598e3*Math.cos(i),y:149598e3*Math.sin(i),z:0},c={x:o.x-r.x,y:o.y-r.y,z:o.z-r.z},d=Math.sqrt(r.x*r.x+r.y*r.y+r.z*r.z);return!(r.x*c.x+r.y*c.y+r.z*c.z<0&&d<8371)}catch(e){return console.error("Error checking satellite sunlight:",e),!1}}(e,a),n=s>0;return{observerInDarkness:r,satelliteSunlit:l,satelliteAboveHorizon:n,isVisible:r&&l&&n}})(e,t,a.date,a.elevation).isVisible)}(a,e,t)}));let s=await P(e);s&&(t=t.map(e=>({...e,weather:function(e,t){try{var a,s,r;let l=t.getTime(),n=0,i=1/0;for(let t=0;t<e.hourly.time.length;t++){let a=new Date(e.hourly.time[t]).getTime(),s=Math.abs(a-l);s<i&&(i=s,n=t)}if(i>36e5)return null;let o=null!=(a=e.hourly.cloud_cover[n])?a:100,c=null!=(s=e.hourly.precipitation[n])?s:0,d=null!=(r=e.hourly.visibility[n])?r:0;return{cloudCover:o,precipitation:c,visibility:d,isGoodWeather:o<=30&&c<=.1}}catch(e){return console.error("Error extracting weather at time:",e),null}}(s,e.maxElevationTime)||void 0}))),c(t)}catch(e){console.error("Error calculating passes:",e),L("Erro ao calcular passagens")}finally{M(!1)}}},[e,a]);(0,r.useEffect)(()=>{e&&a&&H()},[e,a,H]);let U=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];M(!0),L(null);let t=await N(e);t.error&&L(t.error),t.data&&(i(t.data),I(Date.now()-t.data.fetchedAt)),M(!1)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,s.jsx)(m.A,{className:"h-8 w-8"}),"Passagens da ISS"]}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Previs\xf5es de passagens da Esta\xe7\xe3o Espacial Internacional"})]}),(0,s.jsxs)(l.$,{onClick:()=>{U(!0)},disabled:w,variant:"outline",size:"sm",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 mr-2 ".concat(w?"animate-spin":"")}),"Atualizar TLE"]})]}),null!==F&&(0,s.jsxs)(d,{children:[(0,s.jsx)(g.A,{className:"h-4 w-4"}),(0,s.jsx)(u,{children:"Dados Orbitais"}),(0,s.jsxs)(x,{children:["\xdaltima atualiza\xe7\xe3o: ",function(e){if(null===e)return"No cached data";let t=Math.floor(e/36e5),a=Math.floor(e%36e5/6e4);return t>0?"".concat(t,"h ").concat(a,"m ago"):"".concat(a,"m ago")}(F),F>1728e5&&(0,s.jsx)("span",{className:"text-orange-600 dark:text-orange-400 ml-2",children:"(recomendamos atualizar)"})]})]}),C&&(0,s.jsxs)(d,{variant:"destructive",children:[(0,s.jsx)(g.A,{className:"h-4 w-4"}),(0,s.jsx)(u,{children:"Erro"}),(0,s.jsx)(x,{children:C})]}),(0,s.jsx)(_,{location:e,onLocationChange:t}),e&&a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(q,{filters:j,onFiltersChange:b}),(0,s.jsxs)(n.tU,{defaultValue:"list",className:"w-full",children:[(0,s.jsxs)(n.j7,{className:"grid w-full grid-cols-4",children:[(0,s.jsxs)(n.Xi,{value:"list",className:"flex items-center gap-1",children:[(0,s.jsx)(f.A,{className:"h-4 w-4"}),"Lista"]}),(0,s.jsxs)(n.Xi,{value:"sky",className:"flex items-center gap-1",children:[(0,s.jsx)(v.A,{className:"h-4 w-4"}),"Carta Celeste"]}),(0,s.jsxs)(n.Xi,{value:"map",className:"flex items-center gap-1",children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),"Rastro no Solo"]}),(0,s.jsxs)(n.Xi,{value:"live",className:"flex items-center gap-1",children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),"Tempo Real"]})]}),(0,s.jsx)(n.av,{value:"list",className:"mt-6",children:(0,s.jsx)(eo,{passes:Z,currentTime:D})}),(0,s.jsx)(n.av,{value:"sky",className:"mt-6",children:(0,s.jsx)(ed,{passes:Z,currentPosition:B})}),(0,s.jsx)(n.av,{value:"map",className:"mt-6",children:(0,s.jsx)(em,{currentPosition:R,observer:e,orbitPath:V})}),(0,s.jsx)(n.av,{value:"live",className:"mt-6",children:(0,s.jsx)(eh,{tle:a,observer:e,currentTime:D,currentPosition:R,currentLookAngles:B,nextPassTime:O})})]})]}):(0,s.jsxs)(d,{children:[(0,s.jsx)(g.A,{className:"h-4 w-4"}),(0,s.jsx)(u,{children:"Configura\xe7\xe3o Necess\xe1ria"}),(0,s.jsxs)(x,{children:[!e&&"Por favor, defina sua localiza\xe7\xe3o para calcular as passagens da ISS.",!a&&e&&"Carregando dados orbitais..."]})]})]})}a(5603)},1647:(e,t,a)=>{a.d(t,{E:()=>o});var s=a(5155);a(2115);var r=a(2467),l=a(3101),n=a(4269);let i=(0,l.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,asChild:l=!1,...o}=e,c=l?r.DX:"span";return(0,s.jsx)(c,{"data-slot":"badge",className:(0,n.cn)(i({variant:a}),t),...o})}},3406:(e,t,a)=>{a.d(t,{Xi:()=>o,av:()=>c,j7:()=>i,tU:()=>n});var s=a(5155);a(2115);var r=a(5667),l=a(4269);function n(e){let{className:t,...a}=e;return(0,s.jsx)(r.bL,{"data-slot":"tabs",className:(0,l.cn)("flex flex-col gap-2",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,l.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,l.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,l.cn)("flex-1 outline-none",t),...a})}},3998:(e,t,a)=>{a.d(t,{$:()=>o,r:()=>i});var s=a(5155);a(2115);var r=a(2467),l=a(3101),n=a(4269);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:l,asChild:o=!1,...c}=e,d=o?r.DX:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,n.cn)(i({variant:a,size:l,className:t})),...c})}},4269:(e,t,a)=>{a.d(t,{cn:()=>l});var s=a(2821),r=a(5889);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},5142:(e,t,a)=>{a.d(t,{p:()=>l});var s=a(5155);a(2115);var r=a(4269);function l(e){let{className:t,type:a,...l}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...l})}},6444:(e,t,a)=>{a.d(t,{J:()=>n});var s=a(5155);a(2115);var r=a(489),l=a(4269);function n(e){let{className:t,...a}=e;return(0,s.jsx)(r.b,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},6948:(e,t,a)=>{a.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>l,aR:()=>n});var s=a(5155);a(2115);var r=a(4269);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...a})}},7270:(e,t,a)=>{a.d(t,{A0:()=>n,BF:()=>i,Hj:()=>o,XI:()=>l,nA:()=>d,nd:()=>c});var s=a(5155);a(2115);var r=a(4269);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",t),...a})})}function n(e){let{className:t,...a}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}}}]);