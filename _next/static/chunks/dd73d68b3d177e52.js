(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>i,"CardDescription",()=>l,"CardHeader",()=>s,"CardTitle",()=>n])},68736,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(94245);let s=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))});e.i(47167);let n={0:{bg:"bg-green-500",text:"text-green-500",label:"Quieto"},1:{bg:"bg-green-500",text:"text-green-500",label:"Quieto"},2:{bg:"bg-green-400",text:"text-green-400",label:"Quieto"},3:{bg:"bg-yellow-400",text:"text-yellow-400",label:"Instável"},4:{bg:"bg-yellow-500",text:"text-yellow-500",label:"Ativo"},5:{bg:"bg-orange-500",text:"text-orange-500",label:"Tempestade Menor"},6:{bg:"bg-orange-600",text:"text-orange-600",label:"Tempestade Moderada"},7:{bg:"bg-red-500",text:"text-red-500",label:"Tempestade Forte"},8:{bg:"bg-red-600",text:"text-red-600",label:"Tempestade Severa"},9:{bg:"bg-red-700",text:"text-red-700",label:"Tempestade Extrema"}},l={good:{bg:"bg-green-500",text:"text-green-700 dark:text-green-400"},fair:{bg:"bg-yellow-500",text:"text-yellow-700 dark:text-yellow-400"},poor:{bg:"bg-red-500",text:"text-red-700 dark:text-red-400"},unknown:{bg:"bg-gray-400",text:"text-gray-600 dark:text-gray-400"}},i={open:{bg:"bg-green-500",text:"text-green-700 dark:text-green-400"},possible:{bg:"bg-yellow-500",text:"text-yellow-700 dark:text-yellow-400"},closed:{bg:"bg-gray-400",text:"text-gray-600 dark:text-gray-400"},unknown:{bg:"bg-gray-400",text:"text-gray-600 dark:text-gray-400"}},d=[{id:"80m-40m",label:"80m - 40m",frequencies:"3.5 - 7 MHz"},{id:"30m-20m",label:"30m - 20m",frequencies:"10 - 14 MHz"},{id:"17m-15m",label:"17m - 15m",frequencies:"18 - 21 MHz"},{id:"12m-10m",label:"12m - 10m",frequencies:"24 - 28 MHz"}];async function o(){try{let e=await fetch("https://services.swpc.noaa.gov/products/summary/10cm-flux.json");if(!e.ok)return null;let t=await e.json();return{flux:parseInt(t.Flux,10),timestamp:new Date(t.TimeStamp+" UTC")}}catch{return console.error("Failed to fetch solar flux"),null}}async function c(){try{let e=await fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index.json");if(!e.ok)return null;let t=await e.json(),a=t[t.length-1];if(!a)return null;return{kp:parseFloat(a.Kp),aRunning:parseInt(a.a_running,10),timestamp:new Date(a.time_tag)}}catch{return console.error("Failed to fetch K-index"),null}}async function x(){try{let e=await fetch("https://services.swpc.noaa.gov/products/summary/solar-wind-speed.json");if(!e.ok)return null;let t=await e.json();return{speed:parseInt(t.WindSpeed,10),timestamp:new Date(t.TimeStamp+" UTC")}}catch{return console.error("Failed to fetch solar wind"),null}}async function u(){try{let e=await fetch("https://services.swpc.noaa.gov/products/noaa-scales.json");if(!e.ok)return null;let t=await e.json();return{r:{scale:t[0]?.R?.Scale??0,text:t[0]?.R?.Text??"None"},s:{scale:t[0]?.S?.Scale??0,text:t[0]?.S?.Text??"None"},g:{scale:t[0]?.G?.Scale??0,text:t[0]?.G?.Text??"None"},timestamp:new Date(t[0]?.DateStamp+" "+t[0]?.TimeStamp+" UTC")}}catch{return console.error("Failed to fetch geomagnetic scales"),null}}async function m(){let[e,t,a,r]=await Promise.all([o(),c(),x(),u()]);return{solarFlux:e,kIndex:t,solarWind:a,geomagneticScales:r}}function g(e){let t=e.toLowerCase();return"good"===t?"good":"fair"===t?"fair":"poor"===t?"poor":"unknown"}function h(e){let t=e.toLowerCase();return"band open"===t||"high muf"===t?"open":"possible"===t||"50mhz es"===t?"possible":"band closed"===t||"none"===t?"closed":"unknown"}async function p(){try{let e,t=await fetch("https://api.radioamador.info/api/propagation");if(!t.ok)return null;let a=await t.json();if(a.error)return console.error("Backend propagation error:",a.error),null;let r=new Map;for(let e of a.calculatedConditions){let t=r.get(e.band)||{day:"unknown",night:"unknown"};"day"===e.time?t.day=g(e.condition):t.night=g(e.condition),r.set(e.band,t)}let s=Array.from(r.entries()).map(([e,t])=>({band:e,day:t.day,night:t.night})),n="unknown",l="unknown";for(let e of a.calculatedVHFConditions){let t=e.phenomenon.toLowerCase();(t.includes("e-skip")||t.includes("eskip")||t.includes("sporadic"))&&(n=h(e.condition)),t.includes("aurora")&&(l=h(e.condition))}return{solarFlux:a.solarflux||0,sunspotNumber:a.sunspots||0,aIndex:a.aindex||0,kIndex:a.kindex||0,xRay:a.xray||"N/A",geomagField:(e=(a.geomagField||"").toLowerCase()).includes("storm")?"storm":e.includes("active")?"active":e.includes("unsettled")?"unsettled":"quiet",solarWind:a.solarwind||0,signalNoise:a.signalNoise||"N/A",hfBands:s,vhf:{sporadicE:n,tropospheric:"unknown",aurora:l,meteorScatter:"unknown"},lastUpdated:new Date}}catch(e){return console.error("Failed to fetch propagation data:",e),null}}var f=e.i(15288);let b=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))});function j({value:e}){let a=Math.min(100,Math.max(0,(e-60)/240*100));return(0,t.jsx)("div",{className:"relative h-2 w-full rounded-full bg-gray-200 dark:bg-gray-700",children:(0,t.jsx)("div",{className:"absolute left-0 top-0 h-full rounded-full bg-gradient-to-r from-red-500 via-yellow-500 to-green-500",style:{width:`${a}%`}})})}function v({solarIndices:e,hamQSL:a}){let s=(0,r.useTranslations)("propagation"),n=a?.solarFlux??e?.solarFlux?.flux??0,l=a?.sunspotNumber??0,i=a?.solarWind??e?.solarWind?.speed??0,d=a?.xRay??"N/A";return(0,t.jsxs)(f.Card,{children:[(0,t.jsx)(f.CardHeader,{className:"pb-2",children:(0,t.jsxs)(f.CardTitle,{className:"flex items-center gap-2 text-lg",children:[(0,t.jsx)(b,{className:"h-5 w-5 text-yellow-500"}),s("solar.title")]})}),(0,t.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:s("solar.flux")}),(0,t.jsx)("span",{className:`text-2xl font-bold ${n>=200?"text-green-500":n>=150?"text-green-400":n>=100?"text-yellow-500":n>=70?"text-orange-500":"text-red-500"}`,children:n})]}),(0,t.jsx)(j,{value:n})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:s("solar.sunspots")}),(0,t.jsx)("div",{className:"text-xl font-semibold",children:l})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:s("solar.wind")}),(0,t.jsx)("div",{className:"text-xl font-semibold",children:i}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"km/s"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:s("solar.xray")}),(0,t.jsx)("div",{className:"text-xl font-semibold",children:d})]})]})]})]})}let w=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))});function N({value:e}){let a=Array.from({length:9},(e,t)=>t+1);return(0,t.jsx)("div",{className:"flex gap-1",children:a.map(a=>{let r=a<=Math.round(e)?n[a]?.bg??"bg-gray-300":"bg-gray-200 dark:bg-gray-700";return(0,t.jsx)("div",{className:`h-6 flex-1 rounded ${r} transition-colors`,title:`K${a}`},a)})})}function y({solarIndices:e,hamQSL:a}){let s=(0,r.useTranslations)("propagation"),l=a?.kIndex??e?.kIndex?.kp??0,i=a?.aIndex??e?.kIndex?.aRunning??0,d=a?.geomagField??"quiet",o=n[Math.round(l)]??n[0];return(0,t.jsxs)(f.Card,{children:[(0,t.jsx)(f.CardHeader,{className:"pb-2",children:(0,t.jsxs)(f.CardTitle,{className:"flex items-center gap-2 text-lg",children:[(0,t.jsx)(w,{className:"h-5 w-5 text-purple-500"}),s("geomagnetic.title")]})}),(0,t.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:s("geomagnetic.kIndex")}),(0,t.jsx)("span",{className:`text-2xl font-bold ${o.text}`,children:l.toFixed(1)})]}),(0,t.jsx)(N,{value:l}),(0,t.jsxs)("div",{className:"flex justify-between mt-1 text-xs text-muted-foreground",children:[(0,t.jsx)("span",{children:"0"}),(0,t.jsx)("span",{children:"9"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:s("geomagnetic.aIndex")}),(0,t.jsx)("div",{className:"text-xl font-semibold",children:i})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:s("geomagnetic.status.title")}),(0,t.jsx)("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${o.bg} text-white`,children:s(`geomagnetic.status.${d}`)})]})]})]})]})}var k=e.i(15361);function C({condition:e,type:a="band",size:s="md"}){let n=(0,r.useTranslations)("propagation"),d="band"===a?l[e]:i[e];return(0,t.jsx)("span",{className:`inline-flex items-center justify-center rounded-full font-medium ${"sm"===s?"px-2 py-0.5 text-xs":"px-3 py-1 text-sm"} ${d.bg} text-white`,children:n("band"===a?`hf.${e}`:`vhf.${e}`)})}function T({hamQSL:e}){let a=(0,r.useTranslations)("propagation");return(0,t.jsxs)(f.Card,{children:[(0,t.jsx)(f.CardHeader,{className:"pb-2",children:(0,t.jsxs)(f.CardTitle,{className:"flex items-center gap-2 text-lg",children:[(0,t.jsx)(k.SignalIcon,{className:"h-5 w-5 text-ship-cove-500"}),a("hf.title")]})}),(0,t.jsx)(f.CardContent,{children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b dark:border-gray-700",children:[(0,t.jsx)("th",{className:"pb-2 text-left text-sm font-medium text-muted-foreground",children:a("hf.band")}),(0,t.jsx)("th",{className:"pb-2 text-center text-sm font-medium text-muted-foreground",children:a("hf.day")}),(0,t.jsx)("th",{className:"pb-2 text-center text-sm font-medium text-muted-foreground",children:a("hf.night")})]})}),(0,t.jsx)("tbody",{children:d.map(a=>{var r;let s,n=(r=a.id,s=e?.hfBands.find(e=>e.band===r),{day:s?.day??"unknown",night:s?.night??"unknown"});return(0,t.jsxs)("tr",{className:"border-b last:border-0 dark:border-gray-700",children:[(0,t.jsxs)("td",{className:"py-3",children:[(0,t.jsx)("div",{className:"font-medium",children:a.label}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:a.frequencies})]}),(0,t.jsx)("td",{className:"py-3 text-center",children:(0,t.jsx)(C,{condition:n.day,type:"band",size:"sm"})}),(0,t.jsx)("td",{className:"py-3 text-center",children:(0,t.jsx)(C,{condition:n.night,type:"band",size:"sm"})})]},a.id)})})]})})})]})}var S=e.i(13061);function M({title:e,status:a,description:r}){return(0,t.jsxs)("div",{className:"rounded-lg border bg-card p-4 text-center dark:border-gray-700",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-muted-foreground mb-2",children:e}),(0,t.jsx)(C,{condition:a,type:"vhf"}),r&&(0,t.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:r})]})}function I({hamQSL:e}){let a=(0,r.useTranslations)("propagation"),s=e?.vhf??{sporadicE:"unknown",tropospheric:"unknown",aurora:"unknown",meteorScatter:"unknown"};return(0,t.jsxs)(f.Card,{children:[(0,t.jsx)(f.CardHeader,{className:"pb-2",children:(0,t.jsxs)(f.CardTitle,{className:"flex items-center gap-2 text-lg",children:[(0,t.jsx)(S.RadioIcon,{className:"h-5 w-5 text-indigo-500"}),a("vhf.title")]})}),(0,t.jsx)(f.CardContent,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[(0,t.jsx)(M,{title:a("vhf.sporadicE"),status:s.sporadicE}),(0,t.jsx)(M,{title:a("vhf.tropo"),status:s.tropospheric}),(0,t.jsx)(M,{title:a("vhf.aurora"),status:s.aurora}),(0,t.jsx)(M,{title:a("vhf.meteor"),status:s.meteorScatter})]})})]})}var F=e.i(53079);function L(){let e=(0,r.useTranslations)("propagation"),[s,n]=(0,a.useState)(()=>Date.now());return(0,a.useEffect)(()=>{let e=setInterval(()=>{n(Date.now())},3e5);return()=>clearInterval(e)},[]),(0,t.jsxs)(f.Card,{children:[(0,t.jsx)(f.CardHeader,{className:"pb-2",children:(0,t.jsxs)(f.CardTitle,{className:"flex items-center gap-2 text-lg",children:[(0,t.jsx)(F.MapIcon,{className:"h-5 w-5 text-emerald-500"}),e("muf.title")]})}),(0,t.jsxs)(f.CardContent,{children:[(0,t.jsx)("div",{className:"relative w-full overflow-hidden rounded-lg border bg-slate-900 dark:border-gray-700",children:(0,t.jsx)("img",{src:`https://prop.kc2g.com/renders/current/mufd-normal-now.svg?t=${s}`,alt:"MUF Map - Current Propagation Prediction",className:"h-full w-full",loading:"lazy"})}),(0,t.jsx)("p",{className:"mt-2 text-xs text-muted-foreground text-center",children:e("muf.source")})]})]})}function E(){let e=(0,r.useTranslations)("propagation"),[n,l]=(0,a.useState)(null),[i,d]=(0,a.useState)(null),[o,c]=(0,a.useState)(!0),[x,u]=(0,a.useState)(null),[g,h]=(0,a.useState)(null),[f,b]=(0,a.useState)(!1),j=(0,a.useCallback)(async(t=!1)=>{t&&b(!0),h(null);try{let[e,t]=await Promise.all([m(),p()]);l(e),d(t),u(new Date)}catch(t){h(e("error")),console.error("Failed to fetch propagation data:",t)}finally{c(!1),b(!1)}},[e]);return((0,a.useEffect)(()=>{j()},[j]),(0,a.useEffect)(()=>{let e=setInterval(()=>{j()},3e5);return()=>clearInterval(e)},[j]),o)?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-slate-900 dark:text-white",children:e("title")}),(0,t.jsx)("p",{className:"mt-2 text-muted-foreground",children:e("loading")})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsx)("div",{className:"h-48 animate-pulse rounded-lg bg-muted"},a))})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-slate-900 dark:text-white",children:e("title")}),(0,t.jsx)("p",{className:"mt-2 text-muted-foreground",children:e("subtitle")})]}),g&&(0,t.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-400",children:g}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsx)(v,{solarIndices:n,hamQSL:i}),(0,t.jsx)(y,{solarIndices:n,hamQSL:i})]}),(0,t.jsx)(T,{hamQSL:i}),(0,t.jsx)(I,{hamQSL:i}),(0,t.jsx)(L,{}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 text-sm text-muted-foreground sm:flex-row sm:gap-4",children:[x&&(0,t.jsxs)("span",{children:[e("lastUpdated"),": ",x.toLocaleTimeString("pt-PT",{hour:"2-digit",minute:"2-digit"})," UTC"]}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"•"}),(0,t.jsxs)("span",{children:[e("autoRefresh"),": 5 min"]}),(0,t.jsxs)("button",{onClick:()=>{j(!0)},disabled:f,className:"inline-flex items-center gap-1 rounded-md px-3 py-1.5 text-sm font-medium text-ship-cove-600 hover:bg-ship-cove-50 disabled:opacity-50 dark:text-ship-cove-400 dark:hover:bg-ship-cove-900/20",children:[(0,t.jsx)(s,{className:`h-4 w-4 ${f?"animate-spin":""}`}),e("refreshNow")]})]})]})}e.s(["PropagationStatus",()=>E],68736)},75112,e=>{e.n(e.i(68736))}]);